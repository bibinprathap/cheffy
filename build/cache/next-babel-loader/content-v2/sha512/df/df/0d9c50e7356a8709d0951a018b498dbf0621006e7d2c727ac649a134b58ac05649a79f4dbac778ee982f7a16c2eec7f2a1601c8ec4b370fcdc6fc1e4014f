{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { SET_IS_FETCHING_FOOD, SET_ERROR_FETCHING_FOOD, ADD_FOOD_TO_COLLECTION } from './foodTypes';\nimport axiosClient from '../../../utils/axios-config';\nexport var setIsFetchingFood = function setIsFetchingFood(isFetching) {\n  return {\n    type: SET_IS_FETCHING_FOOD,\n    isFetching: isFetching\n  };\n};\nexport var setErrorFetchingFood = function setErrorFetchingFood(errorFetching) {\n  return {\n    type: SET_ERROR_FETCHING_FOOD,\n    errorFetching: errorFetching\n  };\n};\nexport var getPlateByID = function getPlateByID(plateID) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              res = axiosClient.get(\"plate/show/\".concat(plateID));\n              return _context.abrupt(\"return\", res);\n\n            case 5:\n              _context.prev = 5;\n              _context.t0 = _context[\"catch\"](0);\n              return _context.abrupt(\"return\", Promise.reject(_context.t0));\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 5]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var addFoodToCollection = function addFoodToCollection(food) {\n  return {\n    type: ADD_FOOD_TO_COLLECTION,\n    payload: food\n  };\n};\nexport var errorFetchingFood = function errorFetchingFood(error) {\n  return function (dispatch) {\n    dispatch(setIsFetchingFood(true));\n    dispatch(setErrorFetchingFood(false));\n    console.log(error);\n  };\n};\nexport var getCategory = function getCategory() {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              res = axiosClient.get(\"/category\");\n              return _context2.abrupt(\"return\", res);\n\n            case 5:\n              _context2.prev = 5;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n              new Promise.reject(_context2.t0);\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 5]]);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var fetchFood = function fetchFood() {\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch, getState) {\n      var _getState, _getState$food, collection, isFetching, request, food;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _getState = getState(), _getState$food = _getState.food, collection = _getState$food.collection, isFetching = _getState$food.status.isFetching;\n\n              if (!isFetching) {\n                _context3.next = 3;\n                break;\n              }\n\n              return _context3.abrupt(\"return\");\n\n            case 3:\n              dispatch(setErrorFetchingFood(false));\n              dispatch(setIsFetchingFood(true));\n              _context3.next = 7;\n              return axiosClient.get('plate/');\n\n            case 7:\n              request = _context3.sent;\n              food = request.data;\n              _context3.prev = 9;\n              dispatch(addFoodToCollection(food));\n              dispatch(setIsFetchingFood(false));\n              _context3.next = 17;\n              break;\n\n            case 14:\n              _context3.prev = 14;\n              _context3.t0 = _context3[\"catch\"](9);\n              return _context3.abrupt(\"return\", dispatch(setErrorFetchingFood(_context3.t0)));\n\n            case 17:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[9, 14]]);\n    }));\n\n    return function (_x3, _x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};","map":{"version":3,"sources":["C:/Users/user/Desktop/Skyslit/Web Projects/Freelance/cheffy/src/redux/actions/food/foodAction.js"],"names":["SET_IS_FETCHING_FOOD","SET_ERROR_FETCHING_FOOD","ADD_FOOD_TO_COLLECTION","axiosClient","setIsFetchingFood","isFetching","type","setErrorFetchingFood","errorFetching","getPlateByID","plateID","dispatch","res","get","Promise","reject","addFoodToCollection","food","payload","errorFetchingFood","error","console","log","getCategory","fetchFood","getState","collection","status","request","data"],"mappings":"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","sourcesContent":["import { SET_IS_FETCHING_FOOD, SET_ERROR_FETCHING_FOOD, ADD_FOOD_TO_COLLECTION } from './foodTypes';\r\nimport axiosClient from '../../../utils/axios-config';\r\n\r\nexport const setIsFetchingFood = (isFetching) => {\r\n\treturn {\r\n\t\ttype: SET_IS_FETCHING_FOOD,\r\n\t\tisFetching,\r\n\t};\r\n};\r\n\r\nexport const setErrorFetchingFood = (errorFetching) => {\r\n\treturn {\r\n\t\ttype: SET_ERROR_FETCHING_FOOD,\r\n\t\terrorFetching,\r\n\t};\r\n};\r\n\r\nexport const getPlateByID = (plateID) => {\r\n\treturn async(dispatch) =>{\r\n\t\ttry{\r\n\t\tconst res = axiosClient.get(`plate/show/${plateID}`)\r\n\t\treturn res;\r\n\t\t}\r\n\t\tcatch(e){\r\n\t\t\treturn Promise.reject(e);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const addFoodToCollection = (food) => {\r\n\treturn {\r\n\t\ttype: ADD_FOOD_TO_COLLECTION,\r\n\t\tpayload: food,\r\n\t};\r\n};\r\n\r\nexport const errorFetchingFood = (error) => {\r\n\treturn (dispatch) => {\r\n\t\tdispatch(setIsFetchingFood(true));\r\n\t\tdispatch(setErrorFetchingFood(false));\r\n\t\tconsole.log(error);\r\n\t};\r\n};\r\n\r\nexport const getCategory = () => {\r\n\treturn async( dispatch ) => {\r\n\t\ttry{\r\n\t\t\tconst res = axiosClient.get(\"/category\")\r\n\t\t\treturn res\r\n\t\t}\r\n\t\tcatch(e){\r\n\t\t\tconsole.log(e)\r\n\t\t\tnew Promise.reject(e);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const fetchFood = () => {\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst {\r\n\t\t\tfood: {\r\n\t\t\t\tcollection,\r\n\t\t\t\tstatus: { isFetching },\r\n\t\t\t},\r\n\t\t} = getState();\r\n\r\n\t\tif (isFetching) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdispatch(setErrorFetchingFood(false));\r\n\t\tdispatch(setIsFetchingFood(true));\r\n\r\n\t\tconst request = await axiosClient.get('plate/');\r\n\t\tconst food = request.data;\r\n\t\ttry {\r\n\t\t\tdispatch(addFoodToCollection(food));\r\n\t\t\tdispatch(setIsFetchingFood(false));\r\n\t\t} catch (error) {\r\n\t\t\treturn dispatch(setErrorFetchingFood(error));\r\n\t\t}\r\n\t};\r\n};\r\n"]},"metadata":{},"sourceType":"module"}