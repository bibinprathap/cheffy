{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\Skyslit\\\\Web Projects\\\\Freelance\\\\cheffy\\\\src\\\\components\\\\Layouts\\\\home\\\\FoodContent.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { fetchFood, popularAndNew, allPlates, getCategory } from '../../../redux/actions/food';\nimport { Row, Col, Skeleton } from 'antd';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport FoodBanner from './FoodBanner';\nimport FoodGrid from './FoodGrid';\nimport FoodSearch from './FoodSearch';\nimport NewOnCheffy from './NewOnCheffy';\nimport PopularNearYou from './PopularNearYou';\nimport MustTryChef from './MustTryChef';\nimport RecommendedChef from './RecommendedChef';\nimport TopKitchens from \"./TopKitchens\";\nimport '../../../../styles/foodContent.css';\nimport { FoodGridSkeleton, NewAndPopularSkeleton } from '../Skeleton';\nimport Fuse from \"fuse.js\";\nimport Link from \"next/link\";\n\nconst FoodContent = () => {\n  const dispatch = useDispatch();\n  const {\n    0: popular,\n    1: setPopular\n  } = useState('');\n  const {\n    0: _new,\n    1: setNew\n  } = useState('');\n  const {\n    0: category,\n    1: setCategory\n  } = useState('');\n  const itemCount = useSelector(countSelector, shallowEqual);\n  const {\n    0: keyword,\n    1: setKeyword\n  } = useState(\"\");\n  const {\n    0: results,\n    1: setResults\n  } = useState([]);\n  const {\n    0: searchIn,\n    1: setSearchIn\n  } = useState([]);\n  useEffect(async () => {\n    var allPlates = await dispatch(popularAndNew());\n    const getNewAndPopular = await dispatch(popularAndNew());\n    setPopular(getNewAndPopular.data.popular);\n    setNew(getNewAndPopular.data.new);\n    const resCategory = await dispatch(getCategory());\n    console.log(resCategory.message);\n    setCategory(resCategory.data);\n    setSearchIn(allPlates.data.popular);\n    dispatch(fetchFood());\n  }, []);\n\n  const searchData = pattern => {\n    setKeyword(pattern);\n    setResults([]);\n    const fuse = new Fuse(searchIn, {\n      keys: [\"name\"],\n      options: {\n        \"threshold\": 1,\n        \"distance\": 1000\n      }\n    });\n    const result = fuse.search(pattern);\n    const matches = [];\n\n    if (!result.length) {\n      setResults([]);\n    } else {\n      result.forEach(({\n        item\n      }) => {\n        if (matches.length < 6) {\n          matches.push(item);\n        }\n      });\n      setResults(matches);\n    }\n\n    console.log(searchIn);\n    console.log(matches);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(FoodBanner, {\n      keyword: keyword,\n      setKeyword: setKeyword,\n      searchData: searchData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 4\n    }, this), !keyword.length ? /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [itemCount ? /*#__PURE__*/_jsxDEV(FoodGrid, {\n        category: category\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 18\n      }, this) : /*#__PURE__*/_jsxDEV(FoodGridSkeleton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 53\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        id: \"newOnCheffy\",\n        children: [_new.length ? /*#__PURE__*/_jsxDEV(NewOnCheffy, {\n          _new: _new\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this) : /*#__PURE__*/_jsxDEV(NewAndPopularSkeleton, {\n          title: \"New On Cheffy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 51\n        }, this), popular.length ? /*#__PURE__*/_jsxDEV(PopularNearYou, {\n          popular: popular\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 24\n        }, this) : /*#__PURE__*/_jsxDEV(NewAndPopularSkeleton, {\n          title: \"Popular Near You\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 63\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(RecommendedChef, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(MustTryChef, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(TopKitchens, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 23\n    }, this) : /*#__PURE__*/_jsxDEV(FoodSearch, {\n      results: results\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n\nconst countSelector = createSelector(state => state.food.collection, items => items.length);\nexport default FoodContent;","map":{"version":3,"sources":["C:/Users/user/Desktop/Skyslit/Web Projects/Freelance/cheffy/src/components/Layouts/home/FoodContent.jsx"],"names":["React","useState","useEffect","fetchFood","popularAndNew","allPlates","getCategory","Row","Col","Skeleton","shallowEqual","useDispatch","useSelector","createSelector","FoodBanner","FoodGrid","FoodSearch","NewOnCheffy","PopularNearYou","MustTryChef","RecommendedChef","TopKitchens","FoodGridSkeleton","NewAndPopularSkeleton","Fuse","Link","FoodContent","dispatch","popular","setPopular","_new","setNew","category","setCategory","itemCount","countSelector","keyword","setKeyword","results","setResults","searchIn","setSearchIn","getNewAndPopular","data","new","resCategory","console","log","message","searchData","pattern","fuse","keys","options","result","search","matches","length","forEach","item","push","state","food","collection","items"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { fetchFood, popularAndNew, allPlates, getCategory } from '../../../redux/actions/food';\r\nimport { Row, Col, Skeleton } from 'antd';\r\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\r\nimport { createSelector } from 'reselect';\r\nimport FoodBanner from './FoodBanner';\r\nimport FoodGrid from './FoodGrid';\r\nimport FoodSearch from './FoodSearch';\r\nimport NewOnCheffy from './NewOnCheffy';\r\nimport PopularNearYou from './PopularNearYou';\r\nimport MustTryChef from './MustTryChef';\r\nimport RecommendedChef from './RecommendedChef';\r\nimport TopKitchens from \"./TopKitchens\";\r\nimport '../../../../styles/foodContent.css';\r\nimport { FoodGridSkeleton, NewAndPopularSkeleton } from '../Skeleton';\r\nimport Fuse from \"fuse.js\";\r\nimport Link from \"next/link\";\r\n\r\nconst FoodContent = () => {\r\n\tconst dispatch = useDispatch();\r\n\tconst [popular, setPopular] = useState('');\r\n\tconst [_new, setNew] = useState('');\r\n\tconst [category, setCategory] = useState('');\r\n\tconst itemCount = useSelector(countSelector, shallowEqual);\r\n\tconst [keyword, setKeyword] = useState(\"\");\r\n\tconst [results, setResults] = useState([]);\r\n\tconst [searchIn, setSearchIn] = useState([]);\r\n\r\n\tuseEffect(async () => {\r\n\t\tvar allPlates = await dispatch(popularAndNew());\r\n\t\tconst getNewAndPopular = await dispatch(popularAndNew());\r\n\t\tsetPopular(getNewAndPopular.data.popular);\r\n\t\tsetNew(getNewAndPopular.data.new);\r\n\t\tconst resCategory = await dispatch(getCategory())\r\n\t\tconsole.log(resCategory.message)\r\n\t\tsetCategory(resCategory.data);\r\n\t\tsetSearchIn(allPlates.data.popular)\r\n\t\tdispatch(fetchFood());\r\n\t}, []);\r\n\r\n\r\n\tconst searchData = (pattern) => {\r\n\t\tsetKeyword(pattern)\r\n\t\tsetResults([]);\r\n\t\tconst fuse = new Fuse(searchIn, {\r\n\t\t\tkeys: [\"name\"],\r\n\t\t\toptions: { \"threshold\": 1, \"distance\": 1000 }\r\n\t\t});\r\n\r\n\t\tconst result = fuse.search(pattern);\r\n\t\tconst matches = [];\r\n\t\tif (!result.length) {\r\n\t\t\tsetResults([]);\r\n\t\t} else {\r\n\t\t\tresult.forEach(({ item }) => {\r\n\t\t\t\tif (matches.length < 6) {\r\n\t\t\t\t\tmatches.push(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsetResults(matches);\r\n\t\t}\r\n\t\tconsole.log(searchIn)\r\n\t\tconsole.log(matches)\r\n\t};\r\n\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<FoodBanner keyword={keyword} setKeyword={setKeyword} searchData={searchData} />\r\n\t\t\t{!keyword.length ? <React.Fragment>\r\n\t\t\t\t{itemCount ? <FoodGrid category={category} /> : <FoodGridSkeleton />}\r\n\t\t\t\t<Row id=\"newOnCheffy\">\r\n\t\t\t\t\t{_new.length ? <NewOnCheffy _new={_new} /> : <NewAndPopularSkeleton title=\"New On Cheffy\" />}\r\n\t\t\t\t\t{popular.length ? <PopularNearYou popular={popular} /> : <NewAndPopularSkeleton title=\"Popular Near You\" />}\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<RecommendedChef />\r\n\t\t\t\t\t<MustTryChef />\r\n\t\t\t\t\t<TopKitchens />\r\n\t\t\t\t</Row>\r\n\t\t\t</React.Fragment> :\r\n\t\t\t\t<FoodSearch results={results} />\r\n\t\t\t}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst countSelector = createSelector(\r\n\t(state) => state.food.collection,\r\n\t(items) => items.length\r\n);\r\n\r\nexport default FoodContent;\r\n"]},"metadata":{},"sourceType":"module"}