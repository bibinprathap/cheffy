{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\Skyslit\\\\Web Projects\\\\Freelance\\\\cheffy\\\\src\\\\components\\\\auth\\\\login.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { Form, Input, Button, message } from 'antd';\nimport { useDispatch } from 'react-redux';\nimport { signIn, csrfToken } from 'next-auth/client';\nimport { userLogin } from '../../redux/actions/auth/authAction';\n\nvar Login = function Login(props) {\n  _s();\n\n  var dispatch = useDispatch(); //\n\n  var onFinish = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n      var vals, userData, callbackUrl, user;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log('Received values of form: ', values);\n              _context.prev = 1;\n              vals = {\n                login: values.username.trim(),\n                password: values.password\n              };\n              _context.next = 5;\n              return dispatch(userLogin(vals));\n\n            case 5:\n              userData = _context.sent;\n              console.log('cheffyCredentials', userData);\n\n              if (userData && userData.token) {\n                callbackUrl = '/';\n\n                if (userData.data.userResponse.user_type == 'user') {\n                  callbackUrl = '/food';\n                } else if (userData.data.userResponse.user_type == 'chef') {\n                  callbackUrl = '/chef';\n                } else if (userData.data.userResponse.user_type == 'admin') {\n                  callbackUrl = '/kitchen';\n                } else if (userData.data.userResponse.user_type == 'driver') {\n                  callbackUrl = '/driver';\n                }\n\n                user = {\n                  apiToken: userData.token,\n                  id: userData.data.userResponse.id,\n                  name: userData.data.userResponse.name,\n                  email: userData.data.userResponse.email,\n                  role: userData.data.userResponse.user_type,\n                  image: userData.data.userResponse.imagePath,\n                  callbackUrl: \"\".concat(process.env.NEXTAUTH_URL).concat(callbackUrl)\n                };\n                console.log('user', user);\n                signIn('cheffyCredentials', user);\n              }\n\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](1);\n              //console.log('err', err.toString());\n              message.error(_context.t0.message);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 10]]);\n    }));\n\n    return function onFinish(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white dark:bg-gray-800 w-full max-w-sm rounded-lg shadow-md overflow-hidden mx-auto my-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"py-4 px-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mt-1 text-center font-medium text-gray-600 dark:text-gray-200 text-xl\",\n          children: [\"Welcome \", props.userType]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-1 text-center text-gray-500 dark:text-gray-400\",\n          children: \"Login or create account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(Form, {\n          name: \"normal_login\",\n          className: \"login-form\",\n          initialValues: {\n            remember: true,\n            username: 'test_chef2@gmail.com',\n            password: '123456'\n          },\n          onFinish: onFinish,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"csrfToken\",\n            type: \"hidden\",\n            defaultValue: csrfToken\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"username\",\n            rules: [{\n              required: true,\n              message: 'Please input your Username!'\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"Username\",\n              className: \"mt-2 py-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 8\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"password\",\n            rules: [{\n              required: true,\n              message: 'Please input your Password!'\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              type: \"password\",\n              placeholder: \"Password\",\n              className: \"mt-2 py-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 8\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"primary\",\n              htmlType: \"submit\",\n              className: \"login-form-button\",\n              children: \"Log in\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 8\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 7\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center py-4 bg-gray-100 dark:bg-gray-700 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-gray-600 dark:text-gray-200 text-sm\",\n          children: \"Don't have an account? \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          className: \"text-blue-600 dark:text-blue-400 font-bold mx-2 text-sm hover:text-blue-500\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 5\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 4\n    }, _this)\n  }, void 0, false);\n};\n\n_s(Login, \"rgTLoBID190wEKCp9+G8W6F7A5M=\", false, function () {\n  return [useDispatch];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/user/Desktop/Skyslit/Web Projects/Freelance/cheffy/src/components/auth/login.jsx"],"names":["Form","Input","Button","message","useDispatch","signIn","csrfToken","userLogin","Login","props","dispatch","onFinish","values","console","log","vals","login","username","trim","password","userData","token","callbackUrl","data","userResponse","user_type","user","apiToken","id","name","email","role","image","imagePath","process","env","NEXTAUTH_URL","error","userType","remember","required"],"mappings":"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","sourcesContent":["import { Form, Input, Button, message } from 'antd';\r\nimport { useDispatch } from 'react-redux';\r\nimport { signIn, csrfToken } from 'next-auth/client';\r\nimport { userLogin } from '../../redux/actions/auth/authAction';\r\n\r\nconst Login = (props) => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\t//\r\n\tconst onFinish = async (values) => {\r\n\t\tconsole.log('Received values of form: ', values);\r\n\t\ttry {\r\n\t\t\tconst vals = {\r\n\t\t\t\tlogin: values.username.trim(),\r\n\t\t\t\tpassword: values.password,\r\n\t\t\t};\r\n\t\t\tconst userData = await dispatch(userLogin(vals));\r\n\t\t\tconsole.log('cheffyCredentials', userData);\r\n\r\n\t\t\tif (userData && userData.token) {\r\n\t\t\t\tlet callbackUrl = '/';\r\n\t\t\t\tif (userData.data.userResponse.user_type == 'user') {\r\n\t\t\t\t\tcallbackUrl = '/food';\r\n\t\t\t\t} else if (userData.data.userResponse.user_type == 'chef') {\r\n\t\t\t\t\tcallbackUrl = '/chef';\r\n\t\t\t\t} else if (userData.data.userResponse.user_type == 'admin') {\r\n\t\t\t\t\tcallbackUrl = '/kitchen';\r\n\t\t\t\t} else if (userData.data.userResponse.user_type == 'driver') {\r\n\t\t\t\t\tcallbackUrl = '/driver';\r\n\t\t\t\t}\r\n\t\t\t\tconst user = {\r\n\t\t\t\t\tapiToken: userData.token,\r\n\t\t\t\t\tid: userData.data.userResponse.id,\r\n\t\t\t\t\tname: userData.data.userResponse.name,\r\n\t\t\t\t\temail: userData.data.userResponse.email,\r\n\t\t\t\t\trole: userData.data.userResponse.user_type,\r\n\t\t\t\t\timage: userData.data.userResponse.imagePath,\r\n\t\t\t\t\tcallbackUrl: `${process.env.NEXTAUTH_URL}${callbackUrl}`,\r\n\t\t\t\t};\r\n\t\t\t\tconsole.log('user', user);\r\n\t\t\t\tsignIn('cheffyCredentials', user);\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\t//console.log('err', err.toString());\r\n\t\t\tmessage.error(err.message);\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"bg-white dark:bg-gray-800 w-full max-w-sm rounded-lg shadow-md overflow-hidden mx-auto my-auto\">\r\n\t\t\t\t<div className=\"py-4 px-6\">\r\n\t\t\t\t\t<h3 className=\"mt-1 text-center font-medium text-gray-600 dark:text-gray-200 text-xl\">\r\n\t\t\t\t\t\tWelcome {props.userType}\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t\t<p className=\"mt-1 text-center text-gray-500 dark:text-gray-400\">Login or create account</p>\r\n\t\t\t\t\t<Form\r\n\t\t\t\t\t\tname=\"normal_login\"\r\n\t\t\t\t\t\tclassName=\"login-form\"\r\n\t\t\t\t\t\tinitialValues={{\r\n\t\t\t\t\t\t\tremember: true,\r\n\t\t\t\t\t\t\tusername: 'test_chef2@gmail.com',\r\n\t\t\t\t\t\t\tpassword: '123456',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFinish={onFinish}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<input name=\"csrfToken\" type=\"hidden\" defaultValue={csrfToken} />\r\n\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\trules={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: 'Please input your Username!',\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Input placeholder=\"Username\" className=\"mt-2 py-2\" />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\trules={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: 'Please input your Password!',\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Input type=\"password\" placeholder=\"Password\" className=\"mt-2 py-2\" />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n\t\t\t\t\t\t\t\tLog in\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"flex items-center justify-center py-4 bg-gray-100 dark:bg-gray-700 text-center\">\r\n\t\t\t\t\t<span className=\"text-gray-600 dark:text-gray-200 text-sm\">Don't have an account? </span>\r\n\t\t\t\t\t<a href=\"#\" className=\"text-blue-600 dark:text-blue-400 font-bold mx-2 text-sm hover:text-blue-500\">\r\n\t\t\t\t\t\tRegister\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}